!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.ReduxSounds=o():e.ReduxSounds=o()}(this,function(){return function(e){function o(t){if(n[t])return n[t].exports;var r=n[t]={exports:{},id:t,loaded:!1};return e[t].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}var n={};return o.m=e,o.c=n,o.p="",o(0)}([function(e,o,n){"use strict";function t(e){if("object"!==("undefined"==typeof e?"undefined":i(e)))throw{name:"missingSoundData",message:"\n        Please provide an object to soundsMiddleware!\n        When initializing, it needs an object holding all desired sound data.\n        See https://github.com/joshwcomeau/redux-sounds/#troubleshooting\n      "};return u.initialize(e),function(e){return function(e){return function(o){if(!o.meta||!o.meta.sound)return e(o);var n=o.meta.sound.split("."),t=r(n,2),i=t[0],a=t[1];return u.play(i,a),e(o)}}}}var r=function(){function e(e,o){var n=[],t=!0,r=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done)&&(n.push(u.value),!o||n.length!==o);t=!0);}catch(e){r=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw i}}return n}return function(o,n){if(Array.isArray(o))return o;if(Symbol.iterator in Object(o))return e(o,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1);e.exports=t},function(e,o,n){"use strict";function t(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}var r=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},i=n(2).Howl;e.exports={initialize:function(e){var o=void 0,n=Object.getOwnPropertyNames(e);return this.sounds=n.reduce(function(n,u){return o=e[u],"string"==typeof o&&(o={urls:[o]}),r({},n,t({},u,new i(o)))},{}),this.sounds},play:function(e,o){var n=this.sounds[e];if("undefined"==typeof n)return console.warn("\n        The sound '"+e+"' was requested, but redux-sounds doesn't have anything registered under that name.\n        See https://github.com/joshwcomeau/redux-sounds#unregistered-sound\n      ");if(o&&"undefined"==typeof n._sprite[o]){var t=Object.keys(n._sprite).join(", ");return console.warn("\n        The sound '"+e+"' was found, but it does not have a sprite specified for '"+o+"'.\n        It only has access to the following sprites: "+t+".\n        See https://github.com/joshwcomeau/redux-sounds#invalid-sprite\n      ")}n.play(o)}}},function(e,o,n){var t;/*!
	 *  howler.js v1.1.29
	 *  howlerjs.com
	 *
	 *  (c) 2013-2016, James Simpson of GoldFire Studios
	 *  goldfirestudios.com
	 *
	 *  MIT License
	 */
!function(){var r={},i=null,u=!0,a=!1;try{"undefined"!=typeof AudioContext?i=new AudioContext:"undefined"!=typeof webkitAudioContext?i=new webkitAudioContext:u=!1}catch(e){u=!1}if(!u)if("undefined"!=typeof Audio)try{new Audio}catch(e){a=!0}else a=!0;if(u){var d="undefined"==typeof i.createGain?i.createGainNode():i.createGain();d.gain.value=1,d.connect(i.destination)}var s=function(e){this._volume=1,this._muted=!1,this.usingWebAudio=u,this.ctx=i,this.noAudio=a,this._howls=[],this._codecs=e,this.iOSAutoEnable=!0};s.prototype={volume:function(e){var o=this;if(e=parseFloat(e),e>=0&&e<=1){o._volume=e,u&&(d.gain.value=e);for(var n in o._howls)if(o._howls.hasOwnProperty(n)&&o._howls[n]._webAudio===!1)for(var t=0;t<o._howls[n]._audioNode.length;t++)o._howls[n]._audioNode[t].volume=o._howls[n]._volume*o._volume;return o}return u?d.gain.value:o._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){var o=this;o._muted=e,u&&(d.gain.value=e?0:o._volume);for(var n in o._howls)if(o._howls.hasOwnProperty(n)&&o._howls[n]._webAudio===!1)for(var t=0;t<o._howls[n]._audioNode.length;t++)o._howls[n]._audioNode[t].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(!i||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var o=function(){var n=i.createBuffer(1,1,22050),t=i.createBufferSource();t.buffer=n,t.connect(i.destination),"undefined"==typeof t.start?t.noteOn(0):t.start(0),setTimeout(function(){t.playbackState!==t.PLAYING_STATE&&t.playbackState!==t.FINISHED_STATE||(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchend",o,!1))},0)};return window.addEventListener("touchend",o,!1),e}}};var f=null,l={};a||(f=new Audio,l={mp3:!!f.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!f.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!f.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!f.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(f.canPlayType("audio/x-m4a;")||f.canPlayType("audio/m4a;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(f.canPlayType("audio/x-mp4;")||f.canPlayType("audio/mp4;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var c=new s(l),p=function(e){var o=this;o._autoplay=e.autoplay||!1,o._buffer=e.buffer||!1,o._duration=e.duration||0,o._format=e.format||null,o._loop=e.loop||!1,o._loaded=!1,o._sprite=e.sprite||{},o._src=e.src||"",o._pos3d=e.pos3d||[0,0,-.5],o._volume=void 0!==e.volume?e.volume:1,o._urls=e.urls||[],o._rate=e.rate||1,o._model=e.model||null,o._onload=[e.onload||function(){}],o._onloaderror=[e.onloaderror||function(){}],o._onend=[e.onend||function(){}],o._onpause=[e.onpause||function(){}],o._onplay=[e.onplay||function(){}],o._onendTimer=[],o._webAudio=u&&!o._buffer,o._audioNode=[],o._webAudio&&o._setupAudioNode(),"undefined"!=typeof i&&i&&c.iOSAutoEnable&&c._enableiOSAudio(),c._howls.push(o),o.load()};if(p.prototype={load:function(){var e=this,o=null;if(a)return void e.on("loaderror",new Error("No audio support."));for(var n=0;n<e._urls.length;n++){var t,r;if(e._format)t=e._format;else{if(r=e._urls[n],t=/^data:audio\/([^;,]+);/i.exec(r),t||(t=/\.([^.]+)$/.exec(r.split("?",1)[0])),!t)return void e.on("loaderror",new Error("Could not extract format from passed URLs, please add format parameter."));t=t[1].toLowerCase()}if(l[t]){o=e._urls[n];break}}if(!o)return void e.on("loaderror",new Error("No codec support for selected audio sources."));if(e._src=o,e._webAudio)_(e,o);else{var i=new Audio;i.addEventListener("error",function(){i.error&&4===i.error.code&&(s.noAudio=!0),e.on("loaderror",{type:i.error?i.error.code:0})},!1),e._audioNode.push(i),i.src=o,i._pos=0,i.preload="auto",i.volume=c._muted?0:e._volume*c.volume();var u=function(){e._duration=Math.ceil(10*i.duration)/10,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play(),i.removeEventListener("canplaythrough",u,!1)};i.addEventListener("canplaythrough",u,!1),i.load()}return e},urls:function(e){var o=this;return e?(o.stop(),o._urls="string"==typeof e?[e]:e,o._loaded=!1,o.load(),o):o._urls},play:function(e,o){var n=this;return"function"==typeof e&&(o=e),e&&"function"!=typeof e||(e="_default"),n._loaded?n._sprite[e]?(n._inactiveNode(function(t){t._sprite=e;var r=t._pos>0?t._pos:n._sprite[e][0]/1e3,u=0;n._webAudio?(u=n._sprite[e][1]/1e3-t._pos,t._pos>0&&(r=n._sprite[e][0]/1e3+r)):u=n._sprite[e][1]/1e3-(r-n._sprite[e][0]/1e3);var a,d=!(!n._loop&&!n._sprite[e][2]),s="string"==typeof o?o:Math.round(Date.now()*Math.random())+"";if(function(){var o={id:s,sprite:e,loop:d};a=setTimeout(function(){!n._webAudio&&d&&n.stop(o.id).play(e,o.id),n._webAudio&&!d&&(n._nodeById(o.id).paused=!0,n._nodeById(o.id)._pos=0,n._clearEndTimer(o.id)),n._webAudio||d||n.stop(o.id),n.on("end",s)},u/n._rate*1e3),n._onendTimer.push({timer:a,id:o.id})}(),n._webAudio){var f=n._sprite[e][0]/1e3,l=n._sprite[e][1]/1e3;t.id=s,t.paused=!1,h(n,[d,f,l],s),n._playStart=i.currentTime,t.gain.value=n._volume,"undefined"==typeof t.bufferSource.start?d?t.bufferSource.noteGrainOn(0,r,86400):t.bufferSource.noteGrainOn(0,r,u):d?t.bufferSource.start(0,r,86400):t.bufferSource.start(0,r,u)}else{if(4!==t.readyState&&(t.readyState||!navigator.isCocoonJS))return n._clearEndTimer(s),function(){var r=n,i=e,u=o,a=t,d=function(){r.play(i,u),a.removeEventListener("canplaythrough",d,!1)};a.addEventListener("canplaythrough",d,!1)}(),n;t.readyState=4,t.id=s,t.currentTime=r,t.muted=c._muted||t.muted,t.volume=n._volume*c.volume(),setTimeout(function(){t.play()},0)}return n.on("play"),"function"==typeof o&&o(s),n}),n):("function"==typeof o&&o(),n):(n.on("load",function(){n.play(e,o)}),n)},pause:function(e){var o=this;if(!o._loaded)return o.on("play",function(){o.pause(e)}),o;o._clearEndTimer(e);var n=e?o._nodeById(e):o._activeNode();if(n)if(n._pos=o.pos(null,e),o._webAudio){if(!n.bufferSource||n.paused)return o;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else n.pause();return o.on("pause"),o},stop:function(e){var o=this;if(!o._loaded)return o.on("play",function(){o.stop(e)}),o;o._clearEndTimer(e);var n=e?o._nodeById(e):o._activeNode();if(n)if(n._pos=0,o._webAudio){if(!n.bufferSource||n.paused)return o;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else isNaN(n.duration)||(n.pause(),n.currentTime=0);return o},mute:function(e){var o=this;if(!o._loaded)return o.on("play",function(){o.mute(e)}),o;var n=e?o._nodeById(e):o._activeNode();return n&&(o._webAudio?n.gain.value=0:n.muted=!0),o},unmute:function(e){var o=this;if(!o._loaded)return o.on("play",function(){o.unmute(e)}),o;var n=e?o._nodeById(e):o._activeNode();return n&&(o._webAudio?n.gain.value=o._volume:n.muted=!1),o},volume:function(e,o){var n=this;if(e=parseFloat(e),e>=0&&e<=1){if(n._volume=e,!n._loaded)return n.on("play",function(){n.volume(e,o)}),n;var t=o?n._nodeById(o):n._activeNode();return t&&(n._webAudio?t.gain.value=e:t.volume=e*c.volume()),n}return n._volume},loop:function(e){var o=this;return"boolean"==typeof e?(o._loop=e,o):o._loop},sprite:function(e){var o=this;return"object"==typeof e?(o._sprite=e,o):o._sprite},pos:function(e,o){var n=this;if(!n._loaded)return n.on("load",function(){n.pos(e)}),"number"==typeof e?n:n._pos||0;e=parseFloat(e);var t=o?n._nodeById(o):n._activeNode();if(t)return e>=0?(n.pause(o),t._pos=e,n.play(t._sprite,o),n):n._webAudio?t._pos+(i.currentTime-n._playStart):t.currentTime;if(e>=0)return n;for(var r=0;r<n._audioNode.length;r++)if(n._audioNode[r].paused&&4===n._audioNode[r].readyState)return n._webAudio?n._audioNode[r]._pos:n._audioNode[r].currentTime},pos3d:function(e,o,n,t){var r=this;if(o="undefined"!=typeof o&&o?o:0,n="undefined"!=typeof n&&n?n:-.5,!r._loaded)return r.on("play",function(){r.pos3d(e,o,n,t)}),r;if(!(e>=0||e<0))return r._pos3d;if(r._webAudio){var i=t?r._nodeById(t):r._activeNode();i&&(r._pos3d=[e,o,n],i.panner.setPosition(e,o,n),i.panner.panningModel=r._model||"HRTF")}return r},fade:function(e,o,n,t,r){var i=this,u=Math.abs(e-o),a=e>o?"down":"up",d=u/.01,s=n/d;if(!i._loaded)return i.on("load",function(){i.fade(e,o,n,t,r)}),i;i.volume(e,r);for(var f=1;f<=d;f++)!function(){var e=i._volume+("up"===a?.01:-.01)*f,n=Math.round(1e3*e)/1e3,u=o;setTimeout(function(){i.volume(n,r),n===u&&t&&t()},s*f)}()},fadeIn:function(e,o,n){return this.volume(0).play().fade(0,e,o,n)},fadeOut:function(e,o,n,t){var r=this;return r.fade(r._volume,e,o,function(){n&&n(),r.pause(t),r.on("end")},t)},_nodeById:function(e){for(var o=this,n=o._audioNode[0],t=0;t<o._audioNode.length;t++)if(o._audioNode[t].id===e){n=o._audioNode[t];break}return n},_activeNode:function(){for(var e=this,o=null,n=0;n<e._audioNode.length;n++)if(!e._audioNode[n].paused){o=e._audioNode[n];break}return e._drainPool(),o},_inactiveNode:function(e){for(var o=this,n=null,t=0;t<o._audioNode.length;t++)if(o._audioNode[t].paused&&4===o._audioNode[t].readyState){e(o._audioNode[t]),n=!0;break}if(o._drainPool(),!n){var r;if(o._webAudio)r=o._setupAudioNode(),e(r);else{o.load(),r=o._audioNode[o._audioNode.length-1];var i=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",u=function(){r.removeEventListener(i,u,!1),e(r)};r.addEventListener(i,u,!1)}}},_drainPool:function(){var e,o=this,n=0;for(e=0;e<o._audioNode.length;e++)o._audioNode[e].paused&&n++;for(e=o._audioNode.length-1;e>=0&&!(n<=5);e--)o._audioNode[e].paused&&(o._webAudio&&o._audioNode[e].disconnect(0),n--,o._audioNode.splice(e,1))},_clearEndTimer:function(e){for(var o=this,n=-1,t=0;t<o._onendTimer.length;t++)if(o._onendTimer[t].id===e){n=t;break}var r=o._onendTimer[n];r&&(clearTimeout(r.timer),o._onendTimer.splice(n,1))},_setupAudioNode:function(){var e=this,o=e._audioNode,n=e._audioNode.length;return o[n]="undefined"==typeof i.createGain?i.createGainNode():i.createGain(),o[n].gain.value=e._volume,o[n].paused=!0,o[n]._pos=0,o[n].readyState=4,o[n].connect(d),o[n].panner=i.createPanner(),o[n].panner.panningModel=e._model||"equalpower",o[n].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]),o[n].panner.connect(o[n]),o[n]},on:function(e,o){var n=this,t=n["_on"+e];if("function"==typeof o)t.push(o);else for(var r=0;r<t.length;r++)o?t[r].call(n,o):t[r].call(n);return n},off:function(e,o){var n=this,t=n["_on"+e];if(o){for(var r=0;r<t.length;r++)if(o===t[r]){t.splice(r,1);break}}else n["_on"+e]=[];return n},unload:function(){for(var e=this,o=e._audioNode,n=0;n<e._audioNode.length;n++)o[n].paused||(e.stop(o[n].id),e.on("end",o[n].id)),e._webAudio?o[n].disconnect(0):o[n].src="";for(n=0;n<e._onendTimer.length;n++)clearTimeout(e._onendTimer[n].timer);var t=c._howls.indexOf(e);null!==t&&t>=0&&c._howls.splice(t,1),delete r[e._src],e=null}},u)var _=function(e,o){if(o in r)return e._duration=r[o].duration,void y(e);if(/^data:[^;]+;base64,/.test(o)){for(var n=atob(o.split(",")[1]),t=new Uint8Array(n.length),i=0;i<n.length;++i)t[i]=n.charCodeAt(i);v(t.buffer,e,o)}else{var u=new XMLHttpRequest;u.open("GET",o,!0),u.responseType="arraybuffer",u.onload=function(){v(u.response,e,o)},u.onerror=function(){e._webAudio&&(e._buffer=!0,e._webAudio=!1,e._audioNode=[],delete e._gainNode,delete r[o],e.load())};try{u.send()}catch(e){u.onerror()}}},v=function(e,o,n){i.decodeAudioData(e,function(e){e&&(r[n]=e,y(o,e))},function(e){o.on("loaderror",e)})},y=function(e,o){e._duration=o?o.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},h=function(e,o,n){var t=e._nodeById(n);t.bufferSource=i.createBufferSource(),t.bufferSource.buffer=r[e._src],t.bufferSource.connect(t.panner),t.bufferSource.loop=o[0],o[0]&&(t.bufferSource.loopStart=o[1],t.bufferSource.loopEnd=o[1]+o[2]),t.bufferSource.playbackRate.value=e._rate};t=function(){return{Howler:c,Howl:p}}.call(o,n,o,e),!(void 0!==t&&(e.exports=t)),o.Howler=c,o.Howl=p,"undefined"!=typeof window&&(window.Howler=c,window.Howl=p)}()}])});